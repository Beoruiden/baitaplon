<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng kí</title>
    <link rel="stylesheet" href="../css/register.css" />
  </head>
  <body>
    <body class="register-body">
      <h1 class="register-heading">Đăng ký</h1>
      <form action="/process_register" method="post" id="register-form">
        <label for="new_username">Tên người dùng mới:</label><br />
        <input type="text" id="new_username" name="new_username" /><br />
        <label for="new_password">Mật khẩu mới:</label><br />
        <input
          type="password"
          id="new_password"
          name="new_password"
        /><br /><br />
        <input type="submit" value="Đăng ký" />
      </form>
      <script>
        // Lấy thông tin đăng ký từ localStorage
        const registerForm = document.getElementById("register-form");
        registerForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const newUsername = document.getElementById("new_username").value;
          const newPassword = document.getElementById("new_password").value;
          localStorage.setItem("username", newUsername);
          localStorage.setItem("password", newPassword);
          // Hiển thị thông báo đăng ký thành công
          alert("Đăng ký thành công!");
          window.location.href = "/";

          // Điền thông tin đăng ký vào trang đăng nhập
          const loginForm = document.createElement("form");
          loginForm.action = "/registerForm";
          loginForm.method = "post";
          const usernameInput = document.createElement("input");
          usernameInput.type = "text";
          usernameInput.name = "username";
          usernameInput.value = newUsername;
          const passwordInput = document.createElement("input");
          passwordInput.type = "password";
          passwordInput.name = "password";
          passwordInput.value = newPassword;
          const submitInput = document.createElement("input");
          submitInput.type = "submit";
          submitInput.value = "Đăng nhập";
          loginForm.appendChild(usernameInput);
          loginForm.appendChild(passwordInput);
          loginForm.appendChild(submitInput);
          document.body.appendChild(loginForm);
          loginForm.submit();
          window.location.href = "/";
        });
      </script>
    </body>
  </body>
</html>
